#include "X86LLSCT.h"

#include "llvm/CodeGen/MachineFunctionPass.h"

using namespace llvm;

#define PASS_KEY "llsct"
#define DEBUG_TYPE PASS_KEY

static cl::opt<bool> EnableLLSCTRestrict {
  PASS_KEY "-restrict",
  cl::desc("Enable LLSCT Restrict Prefixes"),
  cl::init(true),
};

namespace {

  class X86LLSCTRestrictPass final : public MachineFunctionPass {
  public:
    static inline char ID = 0;
    X86LLSCTRestrictPass(): MachineFunctionPass(ID) {}

  private:
    bool runOnMachineFunction(MachineFunction& MF) override;
    
  };

  bool X86LLSCTRestrictPass::runOnMachineFunction(MachineFunction& MF) {
    // Find all stack accesses w/o corresponding 
  }
  
}
